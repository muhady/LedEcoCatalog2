@model CatalogList

<div class="CatalogPage BodyMatter">

  <div class="PageSection PageHeader">

    @if (Model.Sec1.BannerImage != null)
    {
      <img class="PART-Banner" src="@string.Format("data:image/gif;base64,{0}", Convert.ToBase64String(Model.Sec1.BannerImage))" />
    }

    <div class="PART-Title section1category">@Model.Sec1.CategoryName</div>

    <div class="PART-Text section1text">@Model.Sec1.KratkyPopisKategorie</div>

    @if (Model.Sec1.StrText9 != null)
    {
      <div class="PART-Text section1text">@Model.Sec1.StrText9</div>
    }
    else
    {
      <div class="PART-Text section1text">@Model.Sec1.PopisProduktuParent</div>
    }

    @if (Model.Sec1.StrText10 != null)
    {
      <div class="PART-Text section1text">@Model.Sec1.StrText10</div>
    }

    @*
      <div class="PageText section1text">@Model.Sec1.KratkyPopisKategorie</div>
      @if (Model.Sec1.ParentCategoryName != null)
      {
        <div class="PageTitle section1textcategory">@Model.Sec1.ParentCategoryName</div>
        <div class="PageText section1text">@Model.Sec1.PopisProduktuParent</div>
      }
    *@

  </div>

  @if (Model.LegendItems.Count > 0)
  {
    <div class="PageSection PageLegend">
      @foreach (var legend in Model.LegendItems.Where(l => (!l.Val.Contains("::"))))
      {
        <div class="PART-Item">
          <img class="Image" src="~/images/parameters/@legend.StrExternalID" onError='ImgErrorVideo(this);' />
          <span class="Text">@legend.Val</span>
        </div>
      }
    </div>
  }

  <div class="PageSection PageProducts">
    <table class="PART-Table">                            ``
      <tr>
        <th class="PART-Cell-Code">@Model.CatalogLanguage.ProductCode</th>
        <th class="PART-Cell-Name">@Model.CatalogLanguage.ProductName</th>
        <th class="PART-Cell-Version">@Model.CatalogLanguage.ProductVersion</th>
        @if (Model.PriceLevel != -1)
        {
          <th class="PART-Cell-Price">@Model.CatalogLanguage.ProductPrice</th>
        }
      </tr>
      @foreach (var product in Model.Products)
      {
        <tr>
          <td class="PART-Cell-Code"><a href=@("https://shop.ledeco.sk/<" + product.Kód + ">") target="_blank">@product.Kód</a></td>
          <td class="PART-Cell-Name">@product.Názov</td>
          <td class="PART-Cell-Version">@product.CctK</td>
          @if (Model.PriceLevel != -1)
          {
            var price = product.NumValue;
            <td class="PART-Cell-Price">@(price.HasValue && price.Value != 0.0 ? $"{price} €" : Model.CatalogLanguage.ProductPriceInfo)</td>
          }
        </tr>
      }
    </table>
    @if (Model.LegendItems.Count > 0)
    {
      <div class="PART-Parameters">
        @foreach (var legendItem in Model.LegendItems.Where(l => l.Val.Contains("::")))
        {
          <div class="PART-Item">
            <span class="PART-Label">@legendItem.StrPropertyNameForCust: &nbsp</span>
            <span>@legendItem.Val.Replace("::", ", ")</span>
          </div>
        }
      </div>
    }
  </div>

  <div class="PageSection PageImages">
    @foreach (var productPicture in Model.ProductPictures)
    {
      <div class="PageImage">
        @if (productPicture.BlobData2 != null)
        {
          <img class="Image" src="@($"data:image/gif;base64,{Convert.ToBase64String(productPicture.BlobData2)}")" />
        }
      </div>
      <div class="PageImage">
        @if (productPicture.Img != null)
        {
          <img class="Image" src="@($"data:image/gif;base64,{Convert.ToBase64String(productPicture.Img)}")" />
        }
      </div>
    }

    @foreach (var sec2p3rd in Model.Section2Pic3Rdts)
    {
      <div class="PageImage">
        @{
          var base64 = sec2p3rd.Img == null ? "" : Convert.ToBase64String(sec2p3rd.Img);
          var imgSrc = String.Format("data:image/gif;base64,{0}", base64);
        }
        <img class="Image" src="@imgSrc" />
      </div>
    }
  </div>

  @if (Model.Accessories.Count() > 0)
  {
    <div class="PageSection PageAccessories">
      <div class="PART-Title">
        @Model.CatalogLanguage?.AccessoriesSectionTitle
      </div>

      <table class="PART-Table">
        @foreach (var accessory in Model.Accessories)
        {
          <tr>
            <td rowspan="2" class="PART-Cell-Image">
              @if (accessory.Img != null)
              {
                <img class="Image" src="@($"data:image/gif;base64,{Convert.ToBase64String(accessory.Img)}")" />
              }
            </td>
            <td class="PART-Cell-Code"><a href=@("https://shop.ledeco.sk/<" + accessory.Kod + ">") target="_blank">@accessory.Kod</a></td>
            <td class="PART-Cell-Name">@accessory.Nazov</td>
            @if (Model.PriceLevel != -1)
            {
              var price = accessory.NumValue;
              <td rowspan="2" class="PART-Cell-Price">@(price.HasValue && price.Value != 0.0 ? $"{price} €" : Model.CatalogLanguage.ProductPriceInfo)</td>
            }
          </tr>
          <tr class="PART-Row-Description">
            <td colspan="2" class="PART-Cell-Description">@accessory.Popis</td>
          </tr>
        }
      </table>
    </div>
  }

  <span class="PageNumber">
    <span>@Model.Sec1.Page</span>
  </span>

</div>
